<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Szenarios</title>
    <!-- Bootstrap CSS loaded via TypeScript entry -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" crossorigin="anonymous" />
    <style>
      html, body { height: 100%; margin: 0; }
      #app { display: flex; flex-direction: column; height: 100%; }
      #canvas-container { flex: 1 1 auto; position: relative; overflow: hidden; }
    </style>
  </head>
  <body>
    <div id="app">
      <nav class="navbar navbar-expand navbar-dark bg-dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Train Graph</a>
          <div class="d-flex align-items-center gap-3 ms-auto">
            <div class="text-white-50 small">Scenario:</div>
            <select id="scenario-select" class="form-select form-select-sm bg-dark text-light" style="width: 220px;"></select>
            <div class="text-white-50 small">Route:</div>
            <select id="route-select" class="form-select form-select-sm bg-dark text-light" style="width: 280px;"></select>
            <button id="direction-filter-btn" class="btn btn-sm btn-outline-light" title="Filter trains by direction">
              <i class="bi bi-arrow-left-right"></i>
            </button>
            <button id="add-train-btn" class="btn btn-sm btn-primary">Add Train</button>
            <button id="train-edit-btn" class="btn btn-sm btn-outline-light" disabled title="Edit selected train">
              <i class="bi bi-pencil"></i>
            </button>
            <button id="train-copy-btn" class="btn btn-sm btn-outline-light" disabled title="Copy selected train">
              <i class="bi bi-files"></i>
            </button>
            <button id="train-delete-btn" class="btn btn-sm btn-outline-danger" disabled title="Delete selected train">
              <i class="bi bi-trash"></i>
            </button>
            <button id="train-recalculate-btn" class="btn btn-sm btn-outline-warning" disabled title="Recalculate selected train times">
              <i class="bi bi-arrow-repeat"></i>
            </button>
            <button id="save-btn" class="btn btn-sm btn-success">
              <i class="bi bi-floppy"></i> Save
            </button>
            <button id="export-btn" class="btn btn-sm btn-outline-light">Export JSON</button>
            <div class="navbar-nav">
              <a class="nav-link" href="main.html">Main</a>
            </div>
          </div>
        </div>
      </nav>
      <div id="canvas-container"></div>

      <!-- Add Train Modal -->
      <div class="modal fade" id="add-train-modal" tabindex="-1" aria-labelledby="addTrainModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addTrainModalLabel">Add Train</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="add-train-form" class="modal-body">
              <div class="mb-3">
                <label class="form-label">Train number</label>
                <input id="train-number" class="form-control" type="text" required />
              </div>
              <div class="mb-3">
                <label class="form-label">Type</label>
                <select id="train-type" class="form-select" required>
                  <option value="Passenger" selected>Passenger</option>
                  <option value="Freight">Freight</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Category</label>
                <input id="train-category" class="form-control" type="text" placeholder="e.g., ICE, Freight, Regional" />
              </div>
              <div class="mb-3">
                <label class="form-label">Following Train Number</label>
                <input id="train-following-number" class="form-control" type="text" placeholder="Train number that will use this vehicle" />
                <div class="form-text">If specified, this vehicle will be reused for the following train</div>
              </div>
              <div class="row g-3">
                <div class="col">
                  <label class="form-label">Speed (km/h)</label>
                  <input id="train-speed" class="form-control" type="number" min="10" max="400" step="10" value="120" required />
                </div>
                <div class="col">
                  <label class="form-label">Cars</label>
                  <input id="train-cars" class="form-control" type="number" min="1" max="20" step="1" value="6" required />
                </div>
              </div>
              <div id="train-start-end-row" class="row g-3 mt-1">
                <div class="col">
                  <label class="form-label">Start station</label>
                  <select id="train-start" class="form-select" required></select>
                </div>
                <div class="col">
                  <label class="form-label">Terminus</label>
                  <select id="train-end" class="form-select" required></select>
                </div>
              </div>
              <div class="form-text mt-2">Departure will be set to scenario start time; stops use 1 min dwell.</div>
              <div class="modal-footer px-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button id="train-submit-btn" type="submit" class="btn btn-primary">Create</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Export JSON Modal -->
      <div class="modal fade" id="export-json-modal" tabindex="-1" aria-labelledby="exportJsonModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exportJsonModalLabel">Export Scenario JSON</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <textarea id="export-json-text" class="form-control" rows="18" spellcheck="false" style="font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;"></textarea>
            </div>
            <div class="modal-footer">
              <button id="export-copy-btn" type="button" class="btn btn-primary">Copy to Clipboard</button>
              <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  </body>
</html>


